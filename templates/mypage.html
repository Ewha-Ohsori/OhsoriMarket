{% extends "header.html" %}

<!DOCTYPE html>
<html lang="en">
  <head>
    {% block head %}
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>My Page</title><link rel="stylesheet" href="{{ url_for('static', filename='mypage.css') }}">
    {% endblock head %}
  </head>
  <body>
{% block main %}
<main>
<div class="profile-container">
    <div class="profile-header">
        <img src="{{ url_for('static', filename='images/user_icon.png') }}" alt="user_icon.png" />
        <div class="profile-info">
            <h2>{{ seller.id }}</h2>
            {% if seller.region %}
            <p>{{ seller.region }}</p>
            {% endif %}
            <p>{{ seller.email }}</p>
            {% if seller.phone %}
            <p>{{ seller.phone }}</p>
            {% endif %}
            
        </div>
        <button class="edit-profile-btn">
            <!-- <img src="{{ url_for('static', filename='images/edit.png') }}" alt="edit.png" /> -->
        </button>
    </div>

    <div class="tab-menu">
        <button class="tab active" onclick="showTab('wishlist')">찜한 상품</button>
        <button class="tab" onclick="showTab('purchase-history')">구매 내역</button>
        <button class="tab" onclick="showTab('sales-history')">판매 내역</button>
        <button class="tab" onclick="showTab('review-overview')">리뷰 전체 조회</button>
    </div>

    <!-- 찜한 상품 콘텐츠 -->
    <div class="tab-content active" id="wishlist">
        <ul class="product-items">
            {% for key, like in likes.items() %}
            <a href="{{ url_for('view_item_detail', name=key) }}" class="product-item">
                <img src="{{ url_for('static', filename='images/' + like.img_path) }}" alt="{{ key }}">
                <div class="product-info">
                    <p class="product-name">{{ like.productName }}</p>
                    <p class="product-desc">{{ like.description }}</p>
                </div>
                <p class="product-price">{{ like.price }}원</p>
                <span class="sold-out">거래완료</span>
            </a>
            {% endfor %}
        </ul>
    </div>    

    <!-- 구매 내역 콘텐츠 -->
    <div class="tab-content" id="purchase-history">
        <ul class="product-items">
            <li class="product-item">
                <img src="{{ url_for('static', filename='images/clothes.png') }}" alt="clothes.png" />
                <div class="product-info">
                    <p class="product-name">비비안웨스트우드 아이보리 가디건</p>
                    <p class="product-desc">따뜻하고 가벼운 가디건 입니다</p>
                </div>
                <p class="product-price">35,000원</p>
                <!-- TODO: 백이랑 연결되면 url도 함께 수정 필요 -->
                <a href="{{ url_for('write_review', name='드롱기 토스터기') }}" class="review-btn">리뷰 남기기</a>
            </li>
        </ul>
    </div>

    <!-- 판매 내역 콘텐츠 -->
<!-- 판매 내역 콘텐츠 -->
<div class="tab-content" id="sales-history">
    <ul class="product-items">
        <li class="product-item" data-product-id="1">
            <img src="static/images/clothes.png" alt="clothes.png" />
            <div class="product-info">
                <p class="product-name">청바지</p>
                <p class="product-desc">슬림핏 청바지</p>
                <button class="delete-btn" onclick="deleteItem(this)">
                    <img src="static/images/trashbin.png" alt="삭제">
                </button>
            </div>
            <p class="product-price">25,000원</p>
            <button class="toggle-sale-status completed" onclick="toggleSaleStatus(this)">
                판매 완료
            </button>
        </li>
        <li class="product-item" data-product-id="2">
            <img src="static/images/clothes.png" alt="clothes.png" />
            <div class="product-info">
                <p class="product-name">패딩</p>
                <p class="product-desc">겨울용 패딩</p>
                <button class="delete-btn" onclick="deleteItem(this)">
                    <img src="static/images/trashbin.png" alt="삭제">
                </button>
            </div>
            <p class="product-price">50,000원</p>
            <button class="toggle-sale-status soldout" onclick="toggleSaleStatus(this)">
                판매중
            </button>
        </li>
        <li class="product-item" data-product-id="3">
            <img src="static/images/clothes.png" alt="clothes.png" />
            <div class="product-info">
                <p class="product-name">후드티</p>
                <p class="product-desc">심플한 디자인의 후드티</p>
                <button class="delete-btn" onclick="deleteItem(this)">
                    <img src="static/images/trashbin.png" alt="삭제">
                </button>
            </div>
            <p class="product-price">20,000원</p>
            <button class="toggle-sale-status soldout" onclick="toggleSaleStatus(this)">
                판매중
            </button>
        </li>
    </ul>
</div>


    <!-- 리뷰 전체 조회 콘텐츠 -->
    <div class="tab-content" id="review-overview">
        {% for key, review in reviews %}
        <ul class="review-items">
            <a href="{{ url_for('view_review', name=key) }}" class="review-item">
                <img src="{{ url_for('static', filename='images/' + review.img_path) }}" alt="{{ key }}">
                <div class="review-info">
                    <p class="review-username">{{ review.buyerId }}</p>
                    <p class="product-name">{{ key }}</p>
                    <p class="review-text">{{ review.review }}</p>
                    <div class="star-rating">
                        {% for i in range(5) %}
                            <span class="star {% if i < review.rate|int %} filled{% endif %}">★</span>
                        {% endfor %}
                    </div>
                </div>
            </a>
        </ul>
        {% endfor %}
    </div>
    </div>
</main>
{% endblock main %}
</body>

{% block script %}
<script src="{{ url_for('static', filename='mypage.js') }}"></script>
<script src="{{ url_for('static', filename='header.js') }}"></script>
{% endblock script %}
