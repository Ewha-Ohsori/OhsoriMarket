{% extends "header.html" %}

<!DOCTYPE html>
<html lang="en">
  <head>
    {% block head %}
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>My Page</title><link rel="stylesheet" href="{{ url_for('static', filename='mypage.css') }}">
    {% endblock head %}
  </head>
  <body>
{% block main %}
<main>
<div class="profile-container">
    <div class="profile-header">
        <img src="{{ url_for('static', filename='images/user_icon.png') }}" alt="user_icon.png" />
        <div class="profile-info">
            <h2>osori01</h2>
            <p>유럽</p>
            <p>osori01@ewha.ac.kr</p>
            <p>010-XXXX-XXXX</p>
        </div>
        <button class="edit-profile-btn">
            <img src="{{ url_for('static', filename='images/edit.png') }}" alt="edit.png" />
        </button>
    </div>

    <div class="tab-menu">
        <button class="tab active" onclick="showTab('wishlist')">찜한 상품</button>
        <button class="tab" onclick="showTab('purchase-history')">구매 내역</button>
        <button class="tab" onclick="showTab('sales-history')">판매 내역</button>
<<<<<<< Updated upstream
        <button class="tab" onclick="showTab('review-overview')">리뷰 전체 조회</button>
=======
        <button class="tab" id="review-tab">리뷰 전체 조회</button>
>>>>>>> Stashed changes
    </div>

    <!-- 찜한 상품 콘텐츠 -->
    <div class="tab-content" id="wishlist">
        <ul class="product-items">
            <li class="product-item">
                <img src="{{ url_for('static', filename='images/clothes.png') }}" alt="clothes.png" />
                <div class="product-info">
                    <p class="product-name">비비안웨스트우드 아이보리 가디건</p>
                    <p class="product-desc">따뜻하고 가벼운 가디건 입니다</p>
                </div>
                <p class="product-price">35,000원</p>
                <span class="sold-out">거래완료</span>
            </li>
        </ul>
    </div>

    <!-- 구매 내역 콘텐츠 -->
    <div class="tab-content" id="purchase-history">
        <ul class="product-items">
            <li class="product-item">
                <img src="{{ url_for('static', filename='images/clothes.png') }}" alt="clothes.png" />
                <div class="product-info">
                    <p class="product-name">비비안웨스트우드 아이보리 가디건</p>
                    <p class="product-desc">따뜻하고 가벼운 가디건 입니다</p>
                </div>
                <p class="product-price">35,000원</p>
                <!-- TODO: 백이랑 연결되면 url도 함께 수정 필요 -->
                <a href="{{ url_for('write_review', name='드롱기 토스터기') }}" class="review-btn">리뷰 남기기</a>
            </li>
        </ul>
    </div>

    <!-- 판매 내역 콘텐츠 -->
<div class="tab-content" id="sales-history">
    <ul class="product-items">
        <li class="product-item">
            <img src="{{ url_for('static', filename='images/clothes.png') }}" alt="clothes.png" />
            <div class="product-info">
                <p class="product-name">비비안웨스트우드 아이보리 가디건</p>
                <p class="product-desc">따뜻하고 가벼운 가디건 입니다</p>
                <button class="delete-btn">
                    <img src="{{ url_for('static', filename='images/trashbin.png') }}" alt="삭제">
                </button>
            </div>
            <p class="product-price">35,000원</p>
            <button class="toggle-sale-status soldout">판매 미완</button>
        </li>
        <li class="product-item">
            <img src="{{ url_for('static', filename='images/clothes.png') }}" alt="clothes.png" />
            <div class="product-info">
                <p class="product-name">비비안웨스트우드 아이보리 가디건</p>
                <p class="product-desc">따뜻하고 가벼운 가디건 입니다</p>
                <button class="delete-btn">
                    <img src="{{ url_for('static', filename='images/trashbin.png') }}" alt="삭제">
                </button>
            </div>
            <p class="product-price">35,000원</p>
            <button class="toggle-sale-status completed">판매 완료</button>
        </li>
    </ul>
</div>

    <!-- 리뷰 전체 조회 콘텐츠 -->
    <div class="tab-content" id="review-overview" style="display: none;">
        <h2>리뷰 전체 조회</h2>
        <ul class="review-items">
            {% for key, review in reviews %}
            <li class="review-item">
                <a href="{{ url_for('view_review', name=key) }}">
                    <div class="review-content">
                        <div class="review-image">
                            <img src="{{ url_for('static', filename='images/' + review.img_path) }}" alt="{{ key }}" class="review-thumbnail">
                        </div>
                        <div class="review-details">
                            <p><strong>상품명:</strong> {{ key }}</p>
                            <p><strong>제목:</strong> {{ review.title }}</p>
                            <p><strong>리뷰 내용:</strong> {{ review.review }}</p>
                            <p><strong>평점:</strong> {{ review.rate }}</p>
                            <p><strong>작성자:</strong> {{ review.buyerId }}</p>
                            <p><strong>작성 시간:</strong> {{ review.review_time }}</p>
                        </div>
                    </div>
                </a>
            </li>
            {% else %}
            <li>리뷰가 없습니다.</li>
            {% endfor %}
        </ul>
        
        <!-- Pagination -->
        <div class="pagination">
            <div class="arrow-group-left">
                {% if page > 0 %}
                <a href="{{ url_for('all_reviews', page=page-1) }}" class="prev-page">이전</a>
                {% endif %}
            </div>
            
            {% for i in range(page_count) %}
            <a href="{{ url_for('all_reviews', page=i) }}" class="page-number {% if i == page %}active{% endif %}">
                {{ i + 1 }}
            </a>
            {% endfor %}
            
            <div class="arrow-group-right">
                {% if page < page_count - 1 %}
                <a href="{{ url_for('all_reviews', page=page+1) }}" class="next-page">다음</a>
                {% endif %}
            </div>
        </div>
    </div>

    <div class="pagination">
        <div class="arrow-group-left">
            <span class="first-page"></span>
            <span class="prev-page"></span>
        </div>
        
        <span class="page-number active">1</span>
        <span class="page-number">2</span>
        <span class="page-number">3</span>
        <span class="page-number">4</span>
        <span class="page-number">5</span>
        
        <div class="arrow-group-right">
            <span class="next-page"></span>
            <span class="last-page"></span>
        </div>
    </div>
</main>
{% endblock main %}
</body>

{% block script %}
<script src="{{ url_for('static', filename='mypage.js') }}"></script>
<script src="{{ url_for('static', filename='header.js') }}"></script>
{% endblock script %}
